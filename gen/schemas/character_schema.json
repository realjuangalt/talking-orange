{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "D&D 5e Character Schema",
    "description": "A schema defining the structure for individual D&D 5e character data (players and NPCs). This is an exact copy of the character structure from gs_schema.json.",
    "type": "object",
    "required": [
        "name",
        "hp",
        "ac",
        "strength",
        "dexterity",
        "constitution",
        "intelligence",
        "wisdom",
        "charisma",
        "class_type",
        "damage",
        "inventory",
        "spells"
    ],
    "properties": {
        "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50
        },
        "description": {
            "type": "string",
            "maxLength": 500
        },
        "hp": {
            "type": "integer",
            "minimum": 1,
            "maximum": 1000
        },
        "ac": {
            "type": "integer",
            "minimum": 1,
            "maximum": 50
        },
        "strength": {
            "type": "integer",
            "minimum": 1,
            "maximum": 30
        },
        "dexterity": {
            "type": "integer",
            "minimum": 1,
            "maximum": 30
        },
        "constitution": {
            "type": "integer",
            "minimum": 1,
            "maximum": 30
        },
        "intelligence": {
            "type": "integer",
            "minimum": 1,
            "maximum": 30
        },
        "wisdom": {
            "type": "integer",
            "minimum": 1,
            "maximum": 30
        },
        "charisma": {
            "type": "integer",
            "minimum": 1,
            "maximum": 30
        },
        "class_type": {
            "type": "string",
            "enum": [
                "fighter",
                "wizard",
                "cleric",
                "rogue",
                "ranger",
                "paladin",
                "barbarian",
                "bard",
                "druid",
                "monk",
                "sorcerer",
                "warlock",
                "artificer"
            ]
        },
        "damage": {
            "type": "string",
            "pattern": "^\\d+d\\d+(\\s*\\+\\s*\\d+)?$"
        },
        "inventory": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "name",
                    "type"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 100
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 500
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "melee",
                            "ranged",
                            "magic",
                            "armor",
                            "potion",
                            "scroll",
                            "misc"
                        ]
                    },
                    "damage": {
                        "type": "string",
                        "pattern": "^\\d+d\\d+(\\s*\\+\\s*\\d+)?$"
                    },
                    "finesse": {
                        "type": "boolean"
                    },
                    "reach": {
                        "type": "boolean",
                        "description": "Whether this weapon has reach (10 feet instead of 5)"
                    },
                    "range": {
                        "type": "object",
                        "properties": {
                            "normal": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "Normal range in feet"
                            },
                            "long": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "Long range in feet (disadvantage beyond normal range)"
                            }
                        },
                        "required": [
                            "normal"
                        ]
                    },
                    "ammunition": {
                        "type": "string",
                        "description": "Type of ammunition required (e.g., 'arrows', 'bolts')"
                    },
                    "versatile": {
                        "type": [
                            "object",
                            "boolean"
                        ],
                        "properties": {
                            "one_hand": {
                                "type": [
                                    "string",
                                    "null"
                                ],
                                "pattern": "^\\d+d\\d+(\\s*\\+\\s*\\d+)?$"
                            },
                            "two_hands": {
                                "type": [
                                    "string",
                                    "null"
                                ],
                                "pattern": "^\\d+d\\d+(\\s*\\+\\s*\\d+)?$"
                            }
                        }
                    },
                    "mod": {
                        "type": "string",
                        "enum": [
                            "strength",
                            "dexterity",
                            "intelligence",
                            "wisdom",
                            "charisma",
                            "constitution"
                        ]
                    }
                }
            }
        },
        "spells": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "name",
                    "type",
                    "targeting"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 100
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 500
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "damage",
                            "healing",
                            "buff",
                            "debuff",
                            "utility",
                            "condition"
                        ]
                    },
                    "damage": {
                        "type": "string",
                        "pattern": "^\\d+d\\d+(\\s*\\+\\s*\\d+)?$"
                    },
                    "healing": {
                        "type": "string",
                        "pattern": "^\\d+d\\d+(\\s*\\+\\s*\\d+)?$"
                    },
                    "range": {
                        "oneOf": [
                            {
                                "type": "integer",
                                "minimum": 0,
                                "description": "Range in feet"
                            },
                            {
                                "type": "object",
                                "properties": {
                                    "normal": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "description": "Normal range in feet"
                                    },
                                    "long": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "description": "Long range in feet (disadvantage beyond normal range)"
                                    }
                                },
                                "required": [
                                    "normal"
                                ]
                            }
                        ]
                    },
                    "area": {
                        "type": "string",
                        "description": "Area of effect description (e.g., '20-foot-radius sphere', '30-foot cone')"
                    },
                    "effect": {
                        "type": "object",
                        "properties": {
                            "attribute": {
                                "type": "string",
                                "description": "Attribute being affected"
                            },
                            "modifier": {
                                "oneOf": [
                                    {
                                        "type": "integer"
                                    },
                                    {
                                        "type": "string"
                                    }
                                ],
                                "description": "Modifier value or condition name"
                            },
                            "duration": {
                                "type": "integer",
                                "minimum": 1,
                                "description": "Duration in rounds"
                            }
                        },
                        "required": [
                            "attribute",
                            "modifier"
                        ]
                    },
                    "save": {
                        "type": "string",
                        "enum": [
                            "strength",
                            "dexterity",
                            "constitution",
                            "intelligence",
                            "wisdom",
                            "charisma"
                        ]
                    },
                    "dc": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 30
                    },
                    "targeting": {
                        "type": "string",
                        "enum": [
                            "single",
                            "aoe",
                            "self"
                        ]
                    }
                }
            }
        },
        "conditions": {
            "type": "object",
            "additionalProperties": {
                "oneOf": [
                    {
                        "type": "integer"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "active": {
                                "type": "boolean"
                            },
                            "duration": {
                                "type": "integer"
                            }
                        },
                        "required": [
                            "active",
                            "duration"
                        ]
                    }
                ]
            }
        },
        "speed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 200,
            "description": "Movement speed in feet per round"
        },
        "senses": {
            "type": "object",
            "description": "What the character can perceive",
            "properties": {
                "sight": {
                    "type": "boolean",
                    "default": true,
                    "description": "Can see normally"
                },
                "hearing": {
                    "type": "boolean",
                    "default": true,
                    "description": "Can hear normally"
                },
                "touch": {
                    "type": "boolean",
                    "default": true,
                    "description": "Can feel through touch"
                },
                "smell": {
                    "type": "boolean",
                    "default": true,
                    "description": "Can smell normally"
                },
                "magical": {
                    "type": "boolean",
                    "default": false,
                    "description": "Has magical perception abilities"
                }
            },
            "default": {
                "sight": true,
                "hearing": true,
                "touch": true,
                "smell": true,
                "magical": false
            }
        },
        "magical_senses": {
            "type": "array",
            "description": "Special magical perception abilities",
            "items": {
                "type": "string",
                "enum": [
                    "truesight",
                    "blindsight",
                    "tremorsense",
                    "detect_magic",
                    "detect_invisibility"
                ]
            },
            "default": []
        },
        "sense_ranges": {
            "type": "object",
            "description": "Range of each sense in feet",
            "properties": {
                "sight": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 60,
                    "description": "Sight range in feet"
                },
                "hearing": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 30,
                    "description": "Hearing range in feet"
                },
                "touch": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 5,
                    "description": "Touch range in feet"
                },
                "smell": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 15,
                    "description": "Smell range in feet"
                },
                "magical": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 120,
                    "description": "Magical sense range in feet"
                }
            },
            "default": {
                "sight": 60,
                "hearing": 30,
                "touch": 5,
                "smell": 15,
                "magical": 120
            }
        }
    }
} 